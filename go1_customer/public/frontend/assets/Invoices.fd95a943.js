var D=(k,x,n)=>new Promise((p,i)=>{var d=s=>{try{c(n.next(s))}catch(v){i(v)}},_=s=>{try{c(n.throw(s))}catch(v){i(v)}},c=s=>s.done?p(s.value):Promise.resolve(s.value).then(d,_);c((n=n.apply(k,x)).next())});import{_ as L,a as T}from"./AppHeader.0f924273.js";import{_ as j,a as I}from"./RefreshButton.51938b5d.js";import{c as B,n as o,E as M,a as O,P as F,o as g,f as y,p as r,g as t,u,X as V,Y as E,Z as q,w as C,t as A,j as H,$ as X,B as Y,v as P,a0 as Z}from"./vendor.fd1dc2a4.js";import"./index.b49b7efc.js";const G={class:"flex h-screen w-screen"},J={class:"left h-full border-r bg-gray-50"},K={class:"right flex-1 flex flex-col h-full overflow-auto"},Q={class:"h-full w-full flex flex-col"},W={class:"h-16 px-5 flex items-center gap-3"},ee={class:"flex ml-auto"},ae={key:0},le={key:1},te={class:"text-black text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},se={key:2},oe={class:"font-small text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ce={__name:"Invoices",setup(k){const x=B({url:"go1_customer.go1_customer.api.api.get_salesinvoice",method:"get"}),n=o([]),p=o([]),i=o([]),d=o(!1),_=()=>D(this,null,function*(){try{d.value=!0;const a=yield x.fetch(),l=a.meta.fields.filter(e=>e.in_list_view);n.value=[{label:"Name",key:"name"},...l.map(e=>({label:e.label,key:e.fieldname}))],p.value=a.data}catch(a){console.error("Failed to fetch sales order data",a)}finally{d.value=!1}}),c=a=>{i.value=a},s=M(),v=a=>{s.push({name:"InvoiceDetails",params:{id:a.name}})},R=()=>{h.value="",m.value="",f.value="",b.value=""},h=o(""),m=o(""),f=o(""),b=o(""),$=O(()=>p.value.filter(a=>{const l=a.name.toLowerCase().includes(h.value.toLowerCase()),e=a.status.toLowerCase()===m.value.toLowerCase()||!m.value,w=a.grand_total.toString().replace(/[.,]/g,"").includes(f.value.toString().replace(/[.,]/g,""))||!f.value,U=b.value.split("-").reverse().join("-"),z=a.posting_date&&a.posting_date.includes(U);return l&&e&&w&&z})),N=()=>{_()},S=a=>{switch(a){case"Draft":return{theme:"red"};case"Overdue":return{theme:"blue"};case"Cancelled":return{theme:"green"};case"Return":return{theme:"orange"};default:return{theme:"gray"}}};return F(()=>{_()}),(a,l)=>(g(),y("div",G,[r("div",J,[t(L)]),r("div",K,[r("div",Q,[t(T),r("div",W,[t(u(V),{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),class:"w-48"},null,8,["modelValue"]),t(u(E),{type:"select",options:[{},{label:"Draft",value:"Draft"},{label:"Return",value:"Return"},{label:"Credit Note Issued",value:"Credit Note Issued"},{label:"Partly Paid",value:"Partly Paid"},{label:"Paid",value:"Paid"},{label:"Submitted",value:"Submitted"},{label:"Unpaid",value:"Unpaid"},{label:"Unpaid and Discounted",value:"Unpaid and Discounted"},{label:"Partly Paid and Discounted",value:"Partly Paid and Discounted"},{label:"Cancelled",value:"Cancelled"},{label:"Overdue",value:"Overdue"},{label:"Overdue and Discounted",value:"Overdue and Discounted"},{label:"Internal Transfer",value:"Internal Transfer"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=e=>m.value=e),class:"w-48"},null,8,["modelValue"]),t(u(V),{type:"search",size:"sm",variant:"subtle",placeholder:"Total",modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=e=>f.value=e),class:"w-48"},null,8,["modelValue"]),t(u(q),{class:"border-none w-48",size:"md",variant:"subtle",placeholder:"Date",modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=e=>b.value=e)},null,8,["modelValue"]),r("div",ee,[t(u(H),{variant:"subtle",theme:"gray",size:"sm",onClick:R},{default:C(()=>l[4]||(l[4]=[A(" Reset")])),_:1})]),t(j,{onRefresh:N,isLoading:d.value},null,8,["isLoading"])]),t(u(Z),{class:"listview overflow-auto px-5 flex-1",columns:n.value,rows:i.value,options:{selectable:!0,showTooltip:!0,resizeColumn:!0,onRowClick:v,emptyState:{title:"No records found"}},"row-key":"name"},{cell:C(({item:e,column:w})=>[w.key==="status"?(g(),y("div",ae,[t(u(X),Y(S(e),{size:"sm",label:e}),null,16,["label"])])):w.key==="name"?(g(),y("div",le,[r("span",te,P(e),1)])):(g(),y("div",se,[r("span",oe,P(e),1)]))]),_:1},8,["columns","rows","options"]),t(I,{rows:$.value,"onUpdate:paginatedRows":c},null,8,["rows"])])])]))}};export{ce as default};
