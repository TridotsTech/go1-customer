var m=(v,o,r)=>new Promise((n,p)=>{var c=s=>{try{i(r.next(s))}catch(l){p(l)}},f=s=>{try{i(r.throw(s))}catch(l){p(l)}},i=s=>s.done?n(s.value):Promise.resolve(s.value).then(c,f);i((r=r.apply(v,o)).next())});import{_ as g,a as y}from"./AppHeader.1d5d11ab.js";import{n as d,Q as x,z as w,e as j,o as E,f as k,p as t,g as a,v as C,u as h,a1 as B,a3 as I,c as S}from"./vendor.8ee4b109.js";import"./index.c022bc80.js";const V={class:"flex h-screen w-screen"},z={class:"h-full border-r bg-gray-50"},D={class:"flex-1 flex flex-col h-full overflow-auto"},N={class:"flex-1 overflow-auto px-28 py-10"},T={class:"bg-white border rounded"},M={class:"p-6 h-12 border-b flex justify-between items-center"},O={class:"text-gray-600 text-lg font-bold"},$={class:"p-6 col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6"},A={class:"col-span-2 flex justify-end gap-4"},Q={__name:"IssueNew",setup(v){const o=d(""),r=d(""),n=d({description:""}),p=d(""),c=d(""),f=x(),i=()=>{o.value="",n.value.description=""},s=()=>m(this,null,function*(){const u={subject:o.value,status:r.value||"Open",priority:p.value||"Medium",description:n.value.description};c.value!=="Administrator"&&(u.customer=c.value);try{if(!(yield fetch("/api/resource/Issue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok)throw new Error("Error creating issue");f.push({name:"Issues"})}catch(e){console.error("Error creating issue:",e)}}),l=()=>m(this,null,function*(){const u=S({url:"go1_customer.go1_customer.api.api.getcustomer",method:"get"});try{const e=yield u.fetch();e&&e.length>0&&(c.value=e[0])}catch(e){console.error("Error fetching customer data:",e)}});return w(()=>m(this,null,function*(){yield l()})),(u,e)=>{const b=j("Button");return E(),k("div",V,[t("div",z,[a(g)]),t("div",D,[a(y),t("div",N,[t("div",T,[t("div",M,[e[2]||(e[2]=t("p",{class:"text-xl font-bold text-gray-800 mb-2"},"Issue",-1)),t("p",O,C(o.value),1)]),t("div",$,[a(h(B),{type:"text",size:"md",variant:"subtle",placeholder:"subject",label:"Subject*",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=_=>o.value=_),class:"mb-5 col-span-2"},null,8,["modelValue"]),a(h(I),{fixedMenu:!0,class:"custom-editor border rounded h-[200px] col-span-2",placeholder:"Describe your problem...",onChange:e[1]||(e[1]=_=>n.value.description=_)}),t("div",A,[a(b,{variant:"subtle",theme:"gray",size:"sm",label:"Discard",onClick:i}),a(b,{variant:"solid",theme:"gray",size:"sm",label:"Submit",onClick:s})])])])])])])}}};export{Q as default};
