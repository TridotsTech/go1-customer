var C=(k,y,n)=>new Promise((p,u)=>{var d=t=>{try{c(n.next(t))}catch(m){u(m)}},_=t=>{try{c(n.throw(t))}catch(m){u(m)}},c=t=>t.done?p(t.value):Promise.resolve(t.value).then(d,_);c((n=n.apply(k,y)).next())});import{_ as S,a as j}from"./AppHeader.0f924273.js";import{_ as O,a as M}from"./RefreshButton.51938b5d.js";import{c as U,n as o,E as H,a as P,P as F,o as g,f as x,p as r,g as s,u as i,X as V,Y as E,Z as q,w as D,t as A,j as G,$ as X,B as Y,v as R,a0 as Z}from"./vendor.fd1dc2a4.js";import"./index.b49b7efc.js";const I={class:"flex h-screen w-screen"},J={class:"left h-full border-r bg-gray-50"},K={class:"right flex-1 flex flex-col h-full overflow-auto"},Q={class:"h-full w-full flex flex-col"},W={class:"h-16 px-5 flex items-center gap-3"},ee={class:"flex ml-auto"},ae={key:0},le={key:1},se={class:"text-black text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},te={key:2},oe={class:"font-small text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ce={__name:"Orders",setup(k){const y=U({url:"go1_customer.go1_customer.api.api.get_salesorder",method:"get"}),n=o([]),p=o([]),u=o([]),d=o(!1),_=()=>C(this,null,function*(){try{d.value=!0;const a=yield y.fetch(),l=a.meta.fields.filter(e=>e.in_list_view);n.value=[{label:"Name",key:"name"},...l.map(e=>({label:e.label,key:e.fieldname}))],p.value=a.data}catch(a){console.error("Failed to fetch Orders data",a)}finally{d.value=!1}}),c=a=>{u.value=a},t=H(),m=a=>{t.push({name:"OrderDetails",params:{id:a.name}})},T=()=>{h.value="",v.value="",f.value="",w.value=""},h=o(""),v=o(""),f=o(""),w=o(""),$=P(()=>p.value.filter(a=>{const l=a.name.toLowerCase().includes(h.value.toLowerCase()),e=a.status.toLowerCase()===v.value.toLowerCase()||!v.value,b=a.total.toString().replace(/[.,]/g,"").includes(f.value.toString().replace(/[.,]/g,""))||!f.value,L=w.value.split("-").reverse().join("-"),N=a.transaction_date&&a.transaction_date.includes(L);return l&&e&&b&&N})),B=()=>{_()},z=a=>{switch(a){case"Draft":return{theme:"red"};case"Completed":return{theme:"blue"};case"Cancelled":return{theme:"Green"};case"On Hold":return{theme:"orange"};default:return{theme:"gray"}}};return F(()=>{_()}),(a,l)=>(g(),x("div",I,[r("div",J,[s(S)]),r("div",K,[r("div",Q,[s(j),r("div",W,[s(i(V),{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),class:"w-48"},null,8,["modelValue"]),s(i(E),{type:"select",options:[{},{label:"Draft",value:"Draft"},{label:"On Hold",value:"On Hold"},{label:"To Deliver and Bill",value:"To Deliver and Bill"},{label:"Completed",value:"Completed"},{label:"To Deliver",value:"To Deliver"},{label:"To Bill",value:"To Bill"},{label:"Cancelled",value:"Cancelled"},{label:"Closed",value:"Closed"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:v.value,"onUpdate:modelValue":l[1]||(l[1]=e=>v.value=e),class:"w-48"},null,8,["modelValue"]),s(i(V),{type:"search",size:"sm",variant:"subtle",placeholder:"Total",modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=e=>f.value=e),class:"w-48"},null,8,["modelValue"]),s(i(q),{class:"border-none w-48",size:"md",variant:"subtle",placeholder:"Date",modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=e=>w.value=e)},null,8,["modelValue"]),r("div",ee,[s(i(G),{variant:"subtle",theme:"gray",size:"sm",onClick:T},{default:D(()=>l[4]||(l[4]=[A(" Reset")])),_:1})]),s(O,{onRefresh:B,isLoading:d.value},null,8,["isLoading"])]),s(i(Z),{class:"listview overflow-auto px-5 flex-1",columns:n.value,rows:u.value,options:{selectable:!0,showTooltip:!0,resizeColumn:!0,onRowClick:m,emptyState:{title:"No records found"}},"row-key":"name"},{cell:D(({item:e,column:b})=>[b.key==="status"?(g(),x("div",ae,[s(i(X),Y(z(e),{size:"sm",label:e}),null,16,["label"])])):b.key==="name"?(g(),x("div",le,[r("span",se,R(e),1)])):(g(),x("div",te,[r("span",oe,R(e),1)]))]),_:1},8,["columns","rows","options"]),s(M,{rows:$.value,"onUpdate:paginatedRows":c},null,8,["rows"])])])]))}};export{ce as default};
