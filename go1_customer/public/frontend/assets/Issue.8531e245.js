var C=(y,g,n)=>new Promise((_,u)=>{var d=a=>{try{m(n.next(a))}catch(p){u(p)}},v=a=>{try{m(n.throw(a))}catch(p){u(p)}},m=a=>a.done?_(a.value):Promise.resolve(a.value).then(d,v);m((n=n.apply(y,g)).next())});import{_ as j,a as z}from"./AppHeader.0f924273.js";import{_ as B,a as F}from"./RefreshButton.51938b5d.js";import{c as S,n as i,E as H,a as D,P as M,e as P,o as w,f as b,p as r,g as s,w as x,u as c,j as R,X as T,Y as U,t as E,$ as q,B as A,v as $,a0 as X}from"./vendor.fd1dc2a4.js";import"./index.b49b7efc.js";const Y={class:"flex h-screen w-screen"},G={class:"left h-full border-r bg-gray-50"},J={class:"right flex-1 flex flex-col h-full overflow-auto"},K={class:"h-full w-full flex flex-col"},Q={class:"h-16 px-5 flex items-center gap-3"},W={class:"flex ml-auto"},Z={key:0},ee={key:1},se={class:"text-black text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ae={key:2},te={class:"font-small text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ce={__name:"Issue",setup(y){const g=S({url:"go1_customer.go1_customer.api.api.get_issues",method:"get"}),n=i([]),_=i([]),u=i([]),d=i(!1),v=()=>C(this,null,function*(){try{d.value=!0;const e=yield g.fetch(),t=e.meta.fields.filter(l=>l.in_list_view);n.value=[{label:"Name",key:"name"},...t.map(l=>({label:l.label,key:l.fieldname}))],_.value=e.data}catch(e){console.error("Failed to Issue data",e)}finally{d.value=!1}}),m=e=>{u.value=e},a=H(),p=e=>{a.push({name:"IssueDetails",params:{id:e.name}})},V=()=>{a.push({name:"IssueNew"})},N=()=>{h.value="",f.value=""},h=i(""),f=i(""),L=D(()=>_.value.filter(e=>{const t=e.name.toLowerCase().includes(h.value.toLowerCase()),l=e.status.toLowerCase()===f.value.toLowerCase()||!f.value;return t&&l})),I=()=>{v()},O=e=>{switch(e){case"Open":return{theme:"red"};case"Replied":return{theme:"blue"};case"Closed":return{theme:"green"};case"On Hold":return{theme:"orange"};default:return{theme:"gray"}}};return M(()=>{v()}),(e,t)=>{const l=P("FeatherIcon");return w(),b("div",Y,[r("div",G,[s(j)]),r("div",J,[r("div",K,[s(z,null,{addon:x(()=>[s(c(R),{variant:"solid",label:"Create",onClick:V},{prefix:x(()=>[s(l,{name:"plus",class:"h-4"})]),_:1})]),_:1}),r("div",Q,[s(c(T),{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=o=>h.value=o),class:"w-48"},null,8,["modelValue"]),s(c(U),{type:"select",options:[{},{label:"Open",value:"Open"},{label:"On Hold",value:"On Hold"},{label:"Replied",value:"Replied"},{label:"Resolved",value:"Resolved"},{label:"Closed",value:"Closed"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=o=>f.value=o),class:"w-48"},null,8,["modelValue"]),r("div",W,[s(c(R),{variant:"subtle",theme:"gray",size:"sm",onClick:N},{default:x(()=>t[2]||(t[2]=[E(" Reset")])),_:1})]),s(B,{onRefresh:I,isLoading:d.value},null,8,["isLoading"])]),s(c(X),{class:"listview overflow-auto px-5 flex-1",columns:n.value,rows:u.value,options:{selectable:!0,showTooltip:!0,resizeColumn:!0,onRowClick:p,emptyState:{title:"No records found"}},"row-key":"name"},{cell:x(({item:o,column:k})=>[k.key==="status"?(w(),b("div",Z,[s(c(q),A(O(o),{size:"sm",label:o}),null,16,["label"])])):k.key==="name"?(w(),b("div",ee,[r("span",se,$(o),1)])):(w(),b("div",ae,[r("span",te,$(o),1)]))]),_:1},8,["columns","rows","options"]),s(F,{rows:L.value,"onUpdate:paginatedRows":m},null,8,["rows"])])])])}}};export{ce as default};
