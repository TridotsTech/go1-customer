var V=(k,y,n)=>new Promise((v,u)=>{var d=s=>{try{c(n.next(s))}catch(m){u(m)}},_=s=>{try{c(n.throw(s))}catch(m){u(m)}},c=s=>s.done?v(s.value):Promise.resolve(s.value).then(d,_);c((n=n.apply(k,y)).next())});import{_ as j,a as P}from"./AppHeader.0f924273.js";import{_ as B,a as M}from"./RefreshButton.51938b5d.js";import{c as T,n as o,E as U,a as E,P as q,o as g,f as x,p as r,g as l,u as i,X as R,Y as F,Z as Q,w as C,t as A,j as G,$ as H,B as X,v as D,a0 as Y}from"./vendor.fd1dc2a4.js";import"./index.b49b7efc.js";const Z={class:"flex h-screen w-screen"},I={class:"left h-full border-r bg-gray-50"},J={class:"right flex-1 flex flex-col h-full overflow-auto"},K={class:"h-full w-full flex flex-col"},W={class:"h-16 px-5 flex items-center gap-3"},ee={class:"flex ml-auto"},ae={key:0},te={key:1},le={class:"text-black text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},se={key:2},oe={class:"font-small text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ce={__name:"Quotations",setup(k){const y=T({url:"go1_customer.go1_customer.api.api.get_quotation",method:"get"}),n=o([]),v=o([]),u=o([]),d=o(!1),_=()=>V(this,null,function*(){try{d.value=!0;const a=yield y.fetch(),t=a.meta.fields.filter(e=>e.in_list_view);n.value=[{label:"Name",key:"name"},...t.map(e=>({label:e.label,key:e.fieldname}))],v.value=a.data}catch(a){console.error("Failed to fetch quotation data",a)}finally{d.value=!1}}),c=a=>{u.value=a},s=U(),m=a=>{s.push({name:"QuotationDetails",params:{id:a.name}})},$=()=>{h.value="",p.value="",f.value="",w.value=""},h=o(""),p=o(""),f=o(""),w=o(""),L=E(()=>v.value.filter(a=>{const t=a.name.toLowerCase().includes(h.value.toLowerCase()),e=a.status.toLowerCase()===p.value.toLowerCase()||!p.value,b=a.grand_total.toString().replace(/[.,]/g,"").includes(f.value.toString().replace(/[.,]/g,""))||!f.value,N=w.value.split("-").reverse().join("-"),S=a.transaction_date&&a.transaction_date.includes(N);return t&&e&&b&&S})),O=()=>{_()},z=a=>{switch(a){case"Draft":return{theme:"red"};case"Open":return{theme:"blue"};case"Cancelled":return{theme:"Green"};case"Ordered":return{theme:"orange"};default:return{theme:"gray"}}};return q(()=>{_()}),(a,t)=>(g(),x("div",Z,[r("div",I,[l(j)]),r("div",J,[r("div",K,[l(P),r("div",W,[l(i(R),{type:"search",size:"sm",variant:"subtle",placeholder:"Name",modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=e=>h.value=e),class:"w-48"},null,8,["modelValue"]),l(i(F),{type:"select",options:[{},{label:"Draft",value:"Draft"},{label:"Open",value:"Open"},{label:"Replied",value:"Replied"},{label:"Partially Ordered",value:"Partially Ordered"},{label:"Ordered",value:"Ordered"},{label:"Lost",value:"Lost"},{label:"Cancelled",value:"Cancelled"},{label:"Expired",value:"Expired"}],size:"sm",variant:"subtle",placeholder:"Status",modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),class:"w-48"},null,8,["modelValue"]),l(i(R),{type:"search",size:"sm",variant:"subtle",placeholder:"Total",modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=e=>f.value=e),class:"w-48"},null,8,["modelValue"]),l(i(Q),{class:"border-none w-48",size:"md",variant:"subtle",placeholder:"Date",modelValue:w.value,"onUpdate:modelValue":t[3]||(t[3]=e=>w.value=e)},null,8,["modelValue"]),r("div",ee,[l(i(G),{variant:"subtle",theme:"gray",size:"sm",onClick:$},{default:C(()=>t[4]||(t[4]=[A(" Reset")])),_:1})]),l(B,{onRefresh:O,isLoading:d.value},null,8,["isLoading"])]),l(i(Y),{class:"listview overflow-auto px-5 flex-1",columns:n.value,rows:u.value,options:{selectable:!0,showTooltip:!0,resizeColumn:!0,onRowClick:m,emptyState:{title:"No records found"}},"row-key":"name"},{cell:C(({item:e,column:b})=>[b.key==="status"?(g(),x("div",ae,[l(i(H),X(z(e),{size:"sm",label:e}),null,16,["label"])])):b.key==="name"?(g(),x("div",te,[r("span",le,D(e),1)])):(g(),x("div",se,[r("span",oe,D(e),1)]))]),_:1},8,["columns","rows","options"]),l(M,{rows:L.value,"onUpdate:paginatedRows":c},null,8,["rows"])])])]))}};export{ce as default};
