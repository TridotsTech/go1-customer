var g=(w,v,o)=>new Promise((m,c)=>{var l=a=>{try{s(o.next(a))}catch(u){c(u)}},d=a=>{try{s(o.throw(a))}catch(u){c(u)}},s=a=>a.done?m(a.value):Promise.resolve(a.value).then(l,d);s((o=o.apply(w,v)).next())});import{_ as R,a as S}from"./AppHeader.1d5d11ab.js";import{_ as C,a as V}from"./Filter.0302332f.js";import{c as $,n as r,a as L,z as B,o as n,f as p,p as _,g as i,u as h,X as O,J as P,w as z,O as D,Y as E,v as x,Z as N}from"./vendor.8ee4b109.js";import"./index.c022bc80.js";const T={class:"flex h-screen w-screen"},A={class:"left h-full border-r bg-gray-50"},H={class:"right flex-1 flex flex-col h-full overflow-auto"},J={class:"h-full w-full flex flex-col"},M={key:0,class:"flex justify-center items-center flex-1"},U={key:0},X={key:1},Y={class:"text-black text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},Z={key:2},q={class:"font-small text-gray-700 text-base",style:{"max-width":"170px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",display:"block"}},ee={__name:"Projects",setup(w){const v=$({url:"go1_customer.go1_customer.api.api.get_projects",method:"get"}),o=r([]),m=r([]),c=r([]),l=r(!1),d=r([]),s=r({}),a=()=>g(this,null,function*(){try{l.value=!0;const t=yield v.fetch();d.value=t.meta.fields.filter(e=>e.in_standard_filter),d.value.forEach(e=>{e.fieldtype==="Select"&&typeof e.options=="string"&&(e.options=e.options.split(`
`)),s.value[e.fieldname]=""});const f=t.meta.fields.filter(e=>e.in_list_view);o.value=[...f.map(e=>({label:e.label,key:e.fieldname,fieldtype:e.fieldtype}))],m.value=t.data}catch(t){console.error("Failed to fetch data",t)}finally{l.value=!1}}),u=t=>{c.value=t},b=()=>{Object.keys(s.value).forEach(t=>{s.value[t]=""})},k=L(()=>m.value.filter(t=>Object.keys(s.value).every(f=>{const e=s.value[f];return e?t[f].toString().toLowerCase().includes(e.toString().toLowerCase()):!0}))),j=()=>{a()},F=t=>{switch(t){case"Open":return{theme:"red"};case"Completed":return{theme:"blue"};case"Cancelled":return{theme:"green"};default:return{theme:"gray"}}};return B(()=>{a()}),(t,f)=>(n(),p("div",T,[_("div",A,[i(R)]),_("div",H,[_("div",J,[i(S),i(C,{standardFilterFields:d.value,filterValues:s.value,isLoading:l.value,resetFilters:b,reload:j},null,8,["standardFilterFields","filterValues","isLoading"]),l.value?(n(),p("div",M,[i(h(O),{class:"w-8"})])):(n(),P(h(N),{key:1,class:"listview overflow-auto px-5 flex-1",columns:o.value,rows:c.value,options:{getRowRoute:e=>({name:"ProjectDetails",params:{id:e.name}}),selectable:!0,showTooltip:!0,resizeColumn:!0,emptyState:{title:"No records found"}},"row-key":"name"},{cell:z(({item:e,column:y})=>[y.key==="status"?(n(),p("div",U,[i(h(E),D(F(e),{size:"sm",label:e}),null,16,["label"])])):y.key==="name"?(n(),p("div",X,[_("span",Y,x(e),1)])):(n(),p("div",Z,[_("span",q,x(e),1)]))]),_:1},8,["columns","rows","options"])),i(V,{rows:k.value,"onUpdate:paginatedRows":u},null,8,["rows"])])])]))}};export{ee as default};
