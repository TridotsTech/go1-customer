var m=(_,o,r)=>new Promise((c,p)=>{var i=t=>{try{n(r.next(t))}catch(l){p(l)}},g=t=>{try{n(r.throw(t))}catch(l){p(l)}},n=t=>t.done?c(t.value):Promise.resolve(t.value).then(i,g);n((r=r.apply(_,o)).next())});import{_ as h,a as y}from"./AppHeader.0f924273.js";import{n as d,E as x,P as w,o as j,f as E,p as s,g as a,v as k,u as f,Y as C,a1 as I,j as b,c as S}from"./vendor.fd1dc2a4.js";import"./index.b49b7efc.js";const V={class:"flex h-screen w-screen"},D={class:"h-full border-r bg-gray-50"},N={class:"flex-1 flex flex-col h-full overflow-auto"},T={class:"flex-1 overflow-auto px-28 py-10"},$={class:"bg-white border rounded p-6 grid gap-6 grid-cols-1 md:grid-cols-2"},z={class:"text-gray-600 text-lg font-bold"},B={class:"p-2 col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6"},M={class:"col-span-2 flex justify-end gap-4 py-3"},H={__name:"IssueNew",setup(_){const o=d(""),r=d(""),c=d({description:""}),p=d(""),i=d(""),g=x(),n=()=>{o.value="",c.value.description=""},t=()=>m(this,null,function*(){const u={subject:o.value,status:r.value||"Open",priority:p.value||"Medium",description:c.value.description};i.value!=="Administrator"&&(u.customer=i.value);try{if(!(yield fetch("/api/resource/Issue",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok)throw new Error("Error creating issue");g.push({name:"Issues"})}catch(e){console.error("Error creating issue:",e)}}),l=()=>m(this,null,function*(){const u=S({url:"go1_customer.go1_customer.api.api.getcustomer",method:"get",cache:["true"],auto:["true"]});try{const e=yield u.fetch();e&&(i.value=e)}catch(e){console.error("Error fetching customer data:",e)}});return w(()=>m(this,null,function*(){yield l()})),(u,e)=>(j(),E("div",V,[s("div",D,[a(h)]),s("div",N,[a(y),s("div",T,[s("div",$,[s("div",null,[e[2]||(e[2]=s("p",{class:"text-xl font-bold text-gray-800 mb-2"},"Issue",-1)),s("p",z,k(o.value),1)]),e[3]||(e[3]=s("div",{class:"border-b col-span-2"},null,-1)),s("div",B,[a(f(C),{type:"text",size:"md",variant:"subtle",placeholder:"subject",label:"Subject",modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=v=>o.value=v),class:"mb-5 col-span-2"},null,8,["modelValue"]),a(f(I),{fixedMenu:!0,class:"custom-editor border rounded h-[200px] col-span-2",placeholder:"Describe your problem...",onChange:e[1]||(e[1]=v=>c.value.description=v)}),s("div",M,[a(f(b),{variant:"subtle",theme:"gray",size:"md",label:"Discard",onClick:n}),a(f(b),{variant:"solid",theme:"gray",size:"md",label:"Submit",onClick:t})])])])])])]))}};export{H as default};
